name: Deploy to AKS

on:
  push:
    branches:
      - master

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v2
      
    - name: Log in to Azure
      run: |
        az login --service-principal --username 8aa7433f-6015-4397-9889-1d2d794e633d --password wOi8Q~aM-tsekMej543FtVELrOxP9H26pFjWOaCL --tenant e3de6039-942b-4f3e-b8fa-8d8008f8fd74

    - name: Deploy to AKS
      run: |
       kubectl apply -f k8s/deployment.yml --validate=false
       kubectl apply -f k8s/service.yml --validate=false


    - name: Validate Deployment
      run: kubectl get pods
